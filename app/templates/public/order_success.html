{% extends 'base.html' %}

{% block title %}Order Successful - The Food Palace{% endblock %}

{% block content %}
<div
    class="min-h-[80vh] flex flex-col items-center justify-center p-6 bg-background-light dark:bg-background-dark text-center">
    <div class="w-full max-w-md space-y-8 animate-in fade-in zoom-in duration-500">
        <div class="relative inline-block">
            <div
                class="size-24 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto shadow-xl shadow-emerald-200/50">
                <span class="material-symbols-outlined text-5xl">check_circle</span>
            </div>
            <!-- Decorative particles -->
            <div class="absolute -top-2 -right-2 size-6 bg-primary rounded-full animate-bounce"></div>
            <div class="absolute -bottom-1 -left-1 size-4 bg-amber-400 rounded-full animate-pulse"></div>
        </div>

        <div class="space-y-3">
            <h1 class="text-4xl font-black tracking-tight text-slate-900 dark:text-white">Order Confirmed!</h1>
            <div class="inline-block px-4 py-2 bg-primary/10 rounded-2xl">
                <p class="text-primary font-black text-xl tracking-widest">ORDER #{{ order.id }}</p>
            </div>
            <p class="text-slate-500 dark:text-slate-400 font-medium text-lg px-4">
                {% if order.order_type == 'Pre-book' %}
                Your advance payment has been received. See you at <b>{{ order.estimated_arrival_time }}</b>!
                {% else %}
                Your order has been received at the stall. Please head to the counter for payment.
                {% endif %}
            </p>
        </div>

        <div
            class="bg-white dark:bg-slate-800 p-8 rounded-[2rem] shadow-xl border border-primary/5 text-left space-y-4">
            <h3 class="font-bold text-slate-400 uppercase text-xs tracking-widest">Order Summary</h3>
            <div class="space-y-3">
                {% for item in order.items %}
                <div class="flex justify-between items-center">
                    <span class="font-medium text-slate-700 dark:text-slate-200">{{ item.quantity }}x {{
                        item.menu_item.name }}</span>
                    <span class="font-bold text-slate-900 dark:text-white">₹{{ item.price_at_time * item.quantity
                        }}</span>
                </div>
                {% endfor %}
                <div class="pt-4 border-t border-slate-100 dark:border-slate-700 flex justify-between items-center">
                    <span class="font-black text-lg">Total Amount</span>
                    <span class="font-black text-2xl text-primary">₹{{ order.total_price }}</span>
                </div>
            </div>
        </div>

        <!-- Screenshot Reminder -->
        <div
            class="flex items-center justify-center gap-2 text-amber-600 dark:text-amber-400 bg-amber-50 dark:bg-amber-900/20 py-3 px-4 rounded-xl border border-amber-100 dark:border-amber-900/30">
            <span class="material-symbols-outlined text-xl">screenshot_region</span>
            <p class="text-xs font-black uppercase tracking-wider">Please take a screenshot of this page</p>
        </div>

        <div class="flex flex-col gap-3">
            {% if order.order_type == 'Pre-book' %}
            <a href="https://wa.me/{{ phone }}?text=Hello! I just placed a Pre-book order #{{ order.id }}. Total: ₹{{ order.total_price }}"
                class="w-full bg-emerald-500 text-white font-black py-5 rounded-2xl shadow-lg shadow-emerald-200 transition-all flex items-center justify-center gap-3 hover:scale-[1.02] active:scale-95">
                <span class="material-symbols-outlined">chat</span>
                Notify on WhatsApp
            </a>
            {% endif %}
            <a href="{{ url_for('public.menu') }}"
                class="w-full bg-slate-900 dark:bg-white text-white dark:text-slate-900 font-black py-5 rounded-2xl shadow-xl transition-all hover:scale-[1.02] active:scale-95">
                Back to Menu
            </a>
        </div>

        <p class="text-xs text-slate-400 font-medium">Thank you for choosing The Food Palace!</p>
    </div>
</div>

<script>
    // Clean up cart on success page load
    localStorage.removeItem('streetbite_cart');
</script>
{% endblock %}